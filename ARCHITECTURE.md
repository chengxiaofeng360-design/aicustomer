# AI客户管理系统架构图

## 系统架构概览

```
┌─────────────────────────────────────────────────────────────────┐
│                        AI客户管理系统                            │
├─────────────────────────────────────────────────────────────────┤
│  Frontend Layer (前端层)                                        │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │  HTML5 + CSS3 + JavaScript + Bootstrap 5                   │ │
│  │  - 响应式设计                                               │ │
│  │  - 客户管理界面                                             │ │
│  │  - 数据可视化                                               │ │
│  └─────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│  Web Layer (Web层)                                             │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │  Spring MVC Controllers                                     │ │
│  │  - CustomerController                                       │ │
│  │  - 统一异常处理                                             │ │
│  │  - 跨域配置                                                 │ │
│  └─────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│  Service Layer (服务层)                                        │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │  Business Logic Services                                   │ │
│  │  - CustomerService                                         │ │
│  │  - 事务管理                                                 │ │
│  │  - 业务规则验证                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│  Data Access Layer (数据访问层)                                │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │  MyBatis Mappers                                           │ │
│  │  - CustomerMapper                                          │ │
│  │  - XML映射文件                                             │ │
│  │  - 动态SQL                                                 │ │
│  └─────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────┤
│  Database Layer (数据库层)                                     │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │  MySQL 8.0                                                 │ │
│  │  - customer (客户表)                                        │ │
│  │  - sys_user (用户表)                                        │ │
│  │  - sys_role (角色表)                                        │ │
│  │  - sys_permission (权限表)                                  │ │
│  └─────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

## 技术栈详细说明

### 1. 前端技术栈
```
┌─────────────────────────────────────────────────────────────┐
│  Frontend Technologies                                      │
├─────────────────────────────────────────────────────────────┤
│  • HTML5 - 语义化标记                                        │
│  • CSS3 - 样式和动画                                         │
│  • Bootstrap 5.1.3 - UI框架                                 │
│  • Bootstrap Icons - 图标库                                  │
│  • JavaScript ES6+ - 交互逻辑                                │
│  • Fetch API - HTTP请求                                      │
└─────────────────────────────────────────────────────────────┘
```

### 2. 后端技术栈
```
┌─────────────────────────────────────────────────────────────┐
│  Backend Technologies                                       │
├─────────────────────────────────────────────────────────────┤
│  • Spring Boot 2.4.4 - 主框架                               │
│  • Spring MVC - Web层                                       │
│  • Spring Security - 安全框架                               │
│  • Spring Actuator - 监控                                   │
│  • MyBatis 2.2.0 - ORM框架                                  │
│  • HikariCP - 连接池                                        │
│  • Maven - 构建工具                                         │
└─────────────────────────────────────────────────────────────┘
```

### 3. 数据库设计
```
┌─────────────────────────────────────────────────────────────┐
│  Database Schema                                            │
├─────────────────────────────────────────────────────────────┤
│  customer (客户表)                                           │
│  ├── id (主键)                                              │
│  ├── customer_code (客户编号)                               │
│  ├── customer_name (客户姓名)                               │
│  ├── customer_type (客户类型)                               │
│  ├── phone (手机号码)                                       │
│  ├── email (邮箱)                                           │
│  ├── address (地址)                                         │
│  ├── customer_level (客户等级)                              │
│  ├── status (客户状态)                                      │
│  ├── source (客户来源)                                      │
│  ├── last_contact_time (最后联系时间)                       │
│  ├── create_time (创建时间)                                 │
│  ├── update_time (更新时间)                                 │
│  ├── create_by (创建人)                                     │
│  ├── update_by (更新人)                                     │
│  ├── deleted (删除标志)                                     │
│  └── version (版本号)                                       │
└─────────────────────────────────────────────────────────────┘
```

## 包结构说明

```
com.aicustomer/
├── AiCustomerApplication.java          # 主启动类
├── common/                             # 公共类
│   ├── Result.java                     # 统一返回结果
│   └── PageResult.java                 # 分页结果
├── config/                             # 配置类
│   ├── DatabaseConfig.java             # 数据库配置
│   └── WebConfig.java                  # Web配置
├── controller/                         # 控制器层
│   └── CustomerController.java         # 客户控制器
├── entity/                             # 实体类
│   ├── BaseEntity.java                 # 基础实体
│   └── Customer.java                   # 客户实体
├── mapper/                             # 数据访问层
│   └── CustomerMapper.java             # 客户Mapper
└── service/                            # 服务层
    ├── CustomerService.java            # 客户服务接口
    └── impl/
        └── CustomerServiceImpl.java    # 客户服务实现
```

## 数据流向

```
1. 用户请求 → 前端页面 (index.html)
2. 前端页面 → AJAX请求 → Controller层
3. Controller层 → Service层 (业务逻辑)
4. Service层 → Mapper层 (数据访问)
5. Mapper层 → MySQL数据库
6. 数据库 → Mapper层 → Service层 → Controller层 → 前端页面
```

## 核心功能模块

### 1. 客户管理模块
- 客户信息CRUD操作
- 客户分页查询
- 客户条件筛选
- 客户数据统计

### 2. 系统管理模块
- 用户管理
- 角色管理
- 权限管理
- 系统配置

### 3. 数据分析模块
- 客户数据统计
- 图表展示
- 报表生成

### 4. AI功能模块
- 智能客户分析
- 客户行为预测
- 自动化推荐

## 部署架构

```
┌─────────────────────────────────────────────────────────────┐
│  Production Environment                                     │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    │
│  │   Nginx     │    │  Spring Boot │    │   MySQL     │    │
│  │  (反向代理)  │◄──►│   (应用服务)  │◄──►│  (数据库)    │    │
│  └─────────────┘    └─────────────┘    └─────────────┘    │
│         │                   │                   │          │
│         ▼                   ▼                   ▼          │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    │
│  │  静态资源    │    │   JVM堆内存  │    │  数据文件    │    │
│  │  (HTML/CSS) │    │  (业务逻辑)  │    │  (持久化)    │    │
│  └─────────────┘    └─────────────┘    └─────────────┘    │
└─────────────────────────────────────────────────────────────┘
```

## 性能优化策略

### 1. 数据库优化
- 索引优化
- 查询优化
- 连接池配置
- 分页查询

### 2. 应用优化
- 缓存策略
- 异步处理
- 连接池调优
- JVM参数优化

### 3. 前端优化
- 资源压缩
- 缓存策略
- 懒加载
- CDN加速

## 安全策略

### 1. 数据安全
- 数据加密
- SQL注入防护
- XSS防护
- CSRF防护

### 2. 访问控制
- 用户认证
- 权限控制
- 会话管理
- 审计日志

## 监控和运维

### 1. 应用监控
- Spring Actuator
- 健康检查
- 性能指标
- 日志监控

### 2. 数据库监控
- 连接池监控
- 查询性能
- 慢查询分析
- 空间使用

---

*此架构图展示了AI客户管理系统的整体设计和技术选型，为系统的开发、部署和维护提供了清晰的指导。*

