<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI智能推荐 - AI客户管理系统</title>
    <link href="/lib/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="/lib/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/css/common.css" rel="stylesheet">
</head>
<body>
    <div class="main-container">
        <!-- 页面头部 -->
        <div class="page-header">
            <div class="page-title">
                <i class="bi bi-lightbulb"></i> AI智能推荐
            </div>
            <a href="/" class="back-home-btn">
                <i class="bi bi-house-fill"></i> 返回首页
            </a>
        </div>
        
        <!-- 统计卡片 -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">156</div>
                    <div class="stats-label">推荐总数</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">89</div>
                    <div class="stats-label">采纳率</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">92%</div>
                    <div class="stats-label">准确率</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">24</div>
                    <div class="stats-label">今日推荐</div>
                </div>
            </div>
        </div>

        <!-- 推荐配置 -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">推荐配置</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">推荐类型</label>
                            <select class="form-select" id="recommendationType">
                                <option value="all">全部类型</option>
                                <option value="product">产品推荐</option>
                                <option value="service">服务推荐</option>
                                <option value="strategy">策略推荐</option>
                                <option value="action">行动推荐</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">推荐数量</label>
                            <select class="form-select" id="recommendationCount">
                                <option value="5" selected>5条推荐</option>
                                <option value="10">10条推荐</option>
                                <option value="20">20条推荐</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">时间范围</label>
                            <select class="form-select" id="timeRange">
                                <option value="7">最近7天</option>
                                <option value="30" selected>最近30天</option>
                                <option value="90">最近90天</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3 d-flex align-items-end">
                        <button class="btn btn-primary w-100" onclick="generateRecommendations()">
                            <i class="bi bi-magic"></i> 生成推荐
                        </button>
                    </div>
                </div>
                
                <!-- 偏好设置 -->
                <div class="row mt-3">
                    <div class="col-12">
                        <h6>偏好设置</h6>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="preferConservative" checked>
                                    <label class="form-check-label" for="preferConservative">保守型</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="preferInnovative">
                                    <label class="form-check-label" for="preferInnovative">创新型</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="preferCostEffective" checked>
                                    <label class="form-check-label" for="preferCostEffective">性价比优先</label>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="preferQuick">
                                    <label class="form-check-label" for="preferQuick">快速响应</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 推荐结果 -->
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">推荐结果</h5>
                <div>
                    <button class="btn btn-outline-success" onclick="batchAdopt()">
                        <i class="bi bi-check-all"></i> 批量采纳
                    </button>
                    <button class="btn btn-outline-secondary" onclick="exportRecommendations()">
                        <i class="bi bi-download"></i> 导出
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div id="recommendationResults">
                    <!-- 推荐结果将通过JavaScript动态加载 -->
                </div>
            </div>
        </div>

        <!-- 历史推荐记录 -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">历史推荐记录</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-number">89</div>
                            <div class="stat-label">已采纳</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-number">45</div>
                            <div class="stat-label">待处理</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-number">67</div>
                            <div class="stat-label">采纳率</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-number">92%</div>
                            <div class="stat-label">准确率</div>
                        </div>
                    </div>
                </div>
                
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>客户名称</th>
                                <th>推荐类型</th>
                                <th>推荐内容</th>
                                <th>优先级</th>
                                <th>状态</th>
                                <th>创建时间</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            <!-- 历史记录将通过JavaScript动态加载 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 推荐详情模态框 -->
    <div class="modal fade" id="recommendationDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">推荐详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="recommendationDetailContent">
                    <!-- 推荐详情内容将通过JavaScript动态加载 -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" onclick="adoptRecommendation()">
                        <i class="bi bi-check"></i> 采纳推荐
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/lib/bootstrap/bootstrap.bundle.min.js"></script>
    <script>
        // 模拟推荐数据
        let recommendations = [
            {
                id: 1,
                customerName: '张三',
                type: 'product',
                title: '推荐水稻新品种',
                content: '基于客户种植环境分析，推荐抗病性强、产量高的水稻新品种',
                priority: 'high',
                status: 'pending',
                createTime: '2024-01-25',
                confidence: 0.92,
                reason: '客户所在地区病虫害较多，该品种具有强抗病性'
            },
            {
                id: 2,
                customerName: '李四农业科技有限公司',
                type: 'service',
                title: '推荐技术咨询服务',
                content: '建议提供专业的技术咨询服务，帮助客户优化种植方案',
                priority: 'medium',
                status: 'adopted',
                createTime: '2024-01-24',
                confidence: 0.88,
                reason: '客户规模较大，需要专业的技术支持'
            },
            {
                id: 3,
                customerName: '王五种子研究所',
                type: 'strategy',
                title: '推荐市场拓展策略',
                content: '建议采用线上线下结合的方式，扩大市场影响力',
                priority: 'high',
                status: 'pending',
                createTime: '2024-01-23',
                confidence: 0.95,
                reason: '客户具有研发优势，适合多元化发展'
            }
        ];

        let selectedRecommendations = [];

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            loadRecommendationResults();
            loadHistoryRecords();
        });

        // 生成推荐
        function generateRecommendations() {
            const type = document.getElementById('recommendationType').value;
            const count = parseInt(document.getElementById('recommendationCount').value);
            const timeRange = parseInt(document.getElementById('timeRange').value);
            
            // 获取偏好设置
            const preferences = [];
            if (document.getElementById('preferConservative').checked) preferences.push('保守型');
            if (document.getElementById('preferInnovative').checked) preferences.push('创新型');
            if (document.getElementById('preferCostEffective').checked) preferences.push('性价比优先');
            if (document.getElementById('preferQuick').checked) preferences.push('快速响应');
            
            // 显示生成中的状态
            const button = document.querySelector('button[onclick="generateRecommendations()"]');
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="bi bi-hourglass-split"></i> 生成中...';
            button.disabled = true;
            
            // 模拟AI生成推荐
            setTimeout(() => {
                // 生成新的推荐
                const newRecommendations = generateNewRecommendations(type, count, preferences);
                
                // 添加到推荐列表
                newRecommendations.forEach(rec => {
                    recommendations.unshift(rec);
                });
                
                // 重新加载推荐结果
                loadRecommendationResults();
                
                // 显示生成结果弹窗
                showRecommendationModal(newRecommendations, type, preferences);
                
                // 恢复按钮状态
                button.innerHTML = originalText;
                button.disabled = false;
                
                // 显示成功消息
                showSuccessMessage(`成功生成 ${newRecommendations.length} 条推荐！`);
            }, 2000);
        }
        
        // 生成新的推荐数据
        function generateNewRecommendations(type, count, preferences) {
            const newRecs = [];
            const typeText = getTypeText(type);
            const preferenceText = preferences.length > 0 ? preferences.join('、') : '通用';
            
            for (let i = 0; i < count; i++) {
                const recId = Date.now() + i;
                const rec = {
                    id: recId,
                    customerName: getRandomCustomerName(),
                    type: type,
                    title: generateRecommendationTitle(type, i),
                    content: generateRecommendationContent(type, preferences, i),
                    priority: getRandomPriority(),
                    status: 'pending',
                    createTime: new Date().toLocaleDateString('zh-CN'),
                    confidence: (Math.random() * 0.2 + 0.8).toFixed(2), // 80-100%
                    reason: generateRecommendationReason(type, preferences, i)
                };
                newRecs.push(rec);
            }
            
            return newRecs;
        }
        
        // 生成推荐标题
        function generateRecommendationTitle(type, index) {
            const titles = {
                'product': [
                    '推荐优质水稻品种',
                    '建议引进新品种',
                    '推荐抗病性强的品种',
                    '建议使用高效肥料',
                    '推荐智能种植设备'
                ],
                'service': [
                    '提供专业技术咨询',
                    '建议增加售后服务',
                    '推荐培训服务',
                    '建议定期技术指导',
                    '推荐定制化服务'
                ],
                'strategy': [
                    '优化市场拓展策略',
                    '建议调整定价策略',
                    '推荐营销推广方案',
                    '建议加强品牌建设',
                    '推荐合作发展模式'
                ],
                'action': [
                    '建议增加客户沟通频率',
                    '推荐参加行业展会',
                    '建议建立客户反馈机制',
                    '推荐开展客户满意度调研',
                    '建议优化服务流程'
                ],
                'all': [
                    '综合优化建议',
                    '全方位提升方案',
                    '系统化改进建议',
                    '整体解决方案',
                    '全面升级建议'
                ]
            };
            
            const typeTitles = titles[type] || titles['all'];
            return typeTitles[index % typeTitles.length];
        }
        
        // 生成推荐内容
        function generateRecommendationContent(type, preferences, index) {
            const baseContent = {
                'product': '基于客户需求和市场分析，推荐适合的产品方案',
                'service': '根据客户反馈和业务需求，建议优化服务内容',
                'strategy': '基于市场趋势和竞争分析，提供战略建议',
                'action': '根据客户行为分析，建议采取的具体行动',
                'all': '基于综合分析，提供全面的优化建议'
            };
            
            let content = baseContent[type] || baseContent['all'];
            
            if (preferences.length > 0) {
                content += `，特别考虑${preferences.join('、')}的偏好设置。`;
            }
            
            return content;
        }
        
        // 生成推荐理由
        function generateRecommendationReason(type, preferences, index) {
            const reasons = [
                '基于客户历史数据分析',
                '根据市场趋势预测',
                '考虑客户反馈意见',
                '结合行业最佳实践',
                '基于竞争对手分析'
            ];
            
            let reason = reasons[index % reasons.length];
            
            if (preferences.length > 0) {
                reason += `，符合${preferences.join('、')}的偏好要求。`;
            }
            
            return reason;
        }
        
        // 获取随机客户名称
        function getRandomCustomerName() {
            const names = [
                '张三农业合作社', '李四种子公司', '王五科技农业', '赵六种植基地',
                '钱七农业发展', '孙八现代农业', '周九生态农业', '吴十智慧农场'
            ];
            return names[Math.floor(Math.random() * names.length)];
        }
        
        // 获取随机优先级
        function getRandomPriority() {
            const priorities = ['high', 'medium', 'low'];
            return priorities[Math.floor(Math.random() * priorities.length)];
        }
        
        // 显示推荐结果弹窗
        function showRecommendationModal(newRecommendations, type, preferences) {
            // 确保弹窗存在
            if (!document.getElementById('recommendationModal')) {
                createRecommendationModal();
            }
            
            const modalBody = document.getElementById('recommendationModalBody');
            let content = `
                <div class="alert alert-success">
                    <h6><i class="bi bi-check-circle"></i> 推荐生成成功！</h6>
                    <p>基于您的配置生成了 <strong>${newRecommendations.length}</strong> 条${getTypeText(type)}推荐</p>
                    <p><strong>偏好设置：</strong>${preferences.length > 0 ? preferences.join('、') : '通用设置'}</p>
                </div>
                <div class="recommendation-list">
                    <h6>生成的推荐：</h6>
            `;
            
            newRecommendations.forEach((rec, index) => {
                content += `
                    <div class="card mb-2">
                        <div class="card-body py-2">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">${rec.title}</h6>
                                    <p class="mb-1 text-muted small">${rec.content}</p>
                                    <span class="badge ${getTypeClass(rec.type)} me-1">${getTypeText(rec.type)}</span>
                                    <span class="badge ${getPriorityClass(rec.priority)}">${getPriorityText(rec.priority)}</span>
                                </div>
                                <div class="text-end">
                                    <div class="text-success fw-bold">${Math.round(rec.confidence * 100)}%</div>
                                    <small class="text-muted">置信度</small>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            content += '</div>';
            modalBody.innerHTML = content;
            
            // 显示弹窗 - 使用更安全的方式
            const modalElement = document.getElementById('recommendationModal');
            const modal = new bootstrap.Modal(modalElement, {
                backdrop: true,
                keyboard: true,
                focus: true
            });
            modal.show();
        }
        
        // 创建推荐结果弹窗
        function createRecommendationModal() {
            const modalHTML = `
                <div class="modal fade" id="recommendationModal" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">
                                    <i class="bi bi-lightbulb text-warning"></i> AI推荐结果
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body" id="recommendationModalBody">
                                <!-- 动态内容 -->
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                                <button type="button" class="btn btn-primary" onclick="viewAllRecommendations()">查看全部推荐</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }
        
        // 查看全部推荐
        function viewAllRecommendations() {
            // 关闭弹窗
            const modalElement = document.getElementById('recommendationModal');
            if (modalElement) {
                const modal = bootstrap.Modal.getInstance(modalElement);
                if (modal) {
                    modal.hide();
                }
            }
            
            // 滚动到推荐结果区域
            document.getElementById('recommendationResults').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }
        
        // 显示成功消息
        function showSuccessMessage(message) {
            // 创建成功提示
            const alert = document.createElement('div');
            alert.className = 'alert alert-success alert-dismissible fade show position-fixed';
            alert.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            alert.innerHTML = `
                <i class="bi bi-check-circle"></i> ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(alert);
            
            // 3秒后自动消失
            setTimeout(() => {
                if (alert.parentNode) {
                    alert.remove();
                }
            }, 3000);
        }

        // 加载推荐结果
        function loadRecommendationResults() {
            const container = document.getElementById('recommendationResults');
            container.innerHTML = '';

            if (recommendations.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-5">
                        <i class="bi bi-lightbulb display-1 text-muted"></i>
                        <h5 class="mt-3 text-muted">暂无推荐</h5>
                        <p>点击"生成推荐"按钮获取AI智能推荐</p>
                    </div>
                `;
                return;
            }

            recommendations.forEach(rec => {
                const recCard = document.createElement('div');
                recCard.className = 'recommendation-card mb-3';
                recCard.innerHTML = `
                    <div class="card">
                        <div class="card-body">
                            <div class="row align-items-center">
                                <div class="col-md-1">
                                    <input type="checkbox" class="form-check-input" value="${rec.id}" onchange="toggleRecommendationSelection(${rec.id})">
                                </div>
                                <div class="col-md-8">
                                    <h6 class="card-title">${rec.title}</h6>
                                    <p class="card-text text-muted">${rec.content}</p>
                                    <div class="d-flex gap-2">
                                        <span class="badge ${getTypeClass(rec.type)}">${getTypeText(rec.type)}</span>
                                        <span class="badge ${getPriorityClass(rec.priority)}">${getPriorityText(rec.priority)}</span>
                                        <span class="badge bg-info">置信度: ${Math.round(rec.confidence * 100)}%</span>
                                    </div>
                                </div>
                                <div class="col-md-3 text-end">
                                    <button class="btn btn-outline-primary btn-sm" onclick="viewRecommendationDetail(${rec.id})">
                                        <i class="bi bi-eye"></i> 查看详情
                                    </button>
                                    <button class="btn btn-success btn-sm" onclick="adoptRecommendation(${rec.id})">
                                        <i class="bi bi-check"></i> 采纳
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(recCard);
            });
        }

        // 加载历史记录
        function loadHistoryRecords() {
            const tbody = document.getElementById('historyTableBody');
            tbody.innerHTML = '';

            recommendations.forEach(rec => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="table-cell-truncate" title="${rec.customerName}">${rec.customerName}</td>
                    <td class="table-cell-truncate" title="${getTypeText(rec.type)}">${getTypeText(rec.type)}</td>
                    <td class="table-cell-truncate" title="${rec.title}">${rec.title}</td>
                    <td><span class="badge ${getPriorityClass(rec.priority)}">${getPriorityText(rec.priority)}</span></td>
                    <td><span class="badge ${getStatusClass(rec.status)}">${getStatusText(rec.status)}</span></td>
                    <td class="table-cell-truncate" title="${rec.createTime}">${rec.createTime}</td>
                    <td>
                        <button class="btn btn-outline-primary btn-sm" onclick="viewRecommendationDetail(${rec.id})" title="查看详情">
                            <i class="bi bi-eye"></i>
                        </button>
                        <button class="btn btn-success btn-sm" onclick="adoptRecommendation(${rec.id})" title="采纳推荐">
                            <i class="bi bi-check"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // 查看推荐详情
        function viewRecommendationDetail(id) {
            const rec = recommendations.find(r => r.id === id);
            if (rec) {
                const content = `
                    <div class="row">
                        <div class="col-md-6">
                            <h6>基本信息</h6>
                            <p><strong>客户名称：</strong>${rec.customerName}</p>
                            <p><strong>推荐类型：</strong>${getTypeText(rec.type)}</p>
                            <p><strong>优先级：</strong>${getPriorityText(rec.priority)}</p>
                            <p><strong>状态：</strong>${getStatusText(rec.status)}</p>
                        </div>
                        <div class="col-md-6">
                            <h6>详细信息</h6>
                            <p><strong>置信度：</strong>${Math.round(rec.confidence * 100)}%</p>
                            <p><strong>创建时间：</strong>${rec.createTime}</p>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12">
                            <h6>推荐内容</h6>
                            <p>${rec.content}</p>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12">
                            <h6>推荐理由</h6>
                            <p>${rec.reason}</p>
                        </div>
                    </div>
                `;
                document.getElementById('recommendationDetailContent').innerHTML = content;
                new bootstrap.Modal(document.getElementById('recommendationDetailModal')).show();
            }
        }

        // 采纳推荐
        function adoptRecommendation(id) {
            const rec = recommendations.find(r => r.id === id);
            if (rec) {
                rec.status = 'adopted';
                rec.modifyTime = new Date().toISOString().split('T')[0];
                loadRecommendationResults();
                loadHistoryRecords();
                bootstrap.Modal.getInstance(document.getElementById('recommendationDetailModal')).hide();
                alert('推荐已采纳！');
            }
        }

        // 切换推荐选择状态
        function toggleRecommendationSelection(id) {
            const index = selectedRecommendations.indexOf(id);
            if (index > -1) {
                selectedRecommendations.splice(index, 1);
            } else {
                selectedRecommendations.push(id);
            }
        }

        // 批量采纳
        function batchAdopt() {
            if (selectedRecommendations.length === 0) {
                alert('请先选择要采纳的推荐！');
                return;
            }
            
            if (confirm(`确定要采纳选中的 ${selectedRecommendations.length} 条推荐吗？`)) {
                selectedRecommendations.forEach(id => {
                    const rec = recommendations.find(r => r.id === id);
                    if (rec) {
                        rec.status = 'adopted';
                        rec.modifyTime = new Date().toISOString().split('T')[0];
                    }
                });
                selectedRecommendations = [];
                loadRecommendationResults();
                loadHistoryRecords();
                alert('批量采纳成功！');
            }
        }

        // 导出推荐
        function exportRecommendations() {
            const dataStr = JSON.stringify(recommendations, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `recommendations_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        // 获取类型样式类
        function getTypeClass(type) {
            switch (type) {
                case 'product': return 'bg-primary';
                case 'service': return 'bg-success';
                case 'strategy': return 'bg-warning';
                case 'action': return 'bg-info';
                default: return 'bg-secondary';
            }
        }

        // 获取优先级样式类
        function getPriorityClass(priority) {
            switch (priority) {
                case 'high': return 'bg-danger';
                case 'medium': return 'bg-warning';
                case 'low': return 'bg-success';
                default: return 'bg-secondary';
            }
        }

        // 获取状态样式类
        function getStatusClass(status) {
            switch (status) {
                case 'pending': return 'bg-warning';
                case 'adopted': return 'bg-success';
                case 'rejected': return 'bg-danger';
                default: return 'bg-secondary';
            }
        }

        // 获取类型文本
        function getTypeText(type) {
            switch (type) {
                case 'product': return '产品推荐';
                case 'service': return '服务推荐';
                case 'strategy': return '策略推荐';
                case 'action': return '行动推荐';
                default: return '未知';
            }
        }

        // 获取优先级文本
        function getPriorityText(priority) {
            switch (priority) {
                case 'high': return '高';
                case 'medium': return '中';
                case 'low': return '低';
                default: return '未知';
            }
        }

        // 获取状态文本
        function getStatusText(status) {
            switch (status) {
                case 'pending': return '待处理';
                case 'adopted': return '已采纳';
                case 'rejected': return '已拒绝';
                default: return '未知';
            }
        }
    </script>
</body>
</html>