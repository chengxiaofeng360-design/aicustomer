<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>消息中心 - AI客户管理系统</title>
    <link href="/lib/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="/lib/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/css/common.css" rel="stylesheet">
</head>
<body>
    <div class="main-container">
        <!-- 页面头部 -->
        <div class="page-header">
            <div class="page-title">
                <i class="bi bi-bell-fill"></i> 消息中心
            </div>
            <a href="/" class="back-home-btn">
                <i class="bi bi-house-fill"></i> 返回首页
            </a>
        </div>
        
        <!-- 统计卡片 -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">12</div>
                    <div class="stats-label">待处理任务</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">5</div>
                    <div class="stats-label">紧急提醒</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">28</div>
                    <div class="stats-label">本周活动</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">156</div>
                    <div class="stats-label">系统通知</div>
                </div>
            </div>
        </div>

        <!-- 任务提醒 -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">任务提醒</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>任务类型</th>
                                <th>任务内容</th>
                                <th>优先级</th>
                                <th>截止时间</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>客户跟进</td>
                                <td>跟进张三的种子采购需求</td>
                                <td><span class="badge bg-danger">高</span></td>
                                <td>2024-01-30</td>
                                <td><span class="badge bg-warning">待处理</span></td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary" onclick="viewMessage(1)">查看</button>
                                    <button class="btn btn-sm btn-outline-success" onclick="completeMessage(1)">完成</button>
                                </td>
                            </tr>
                            <tr>
                                <td>合同审核</td>
                                <td>审核与王五农业公司的合同</td>
                                <td><span class="badge bg-warning">中</span></td>
                                <td>2024-01-28</td>
                                <td><span class="badge bg-success">已完成</span></td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary">查看</button>
                                    <button class="btn btn-sm btn-outline-secondary" disabled>完成</button>
                                </td>
                            </tr>
                            <tr>
                                <td>技术培训</td>
                                <td>为客户提供种子种植技术培训</td>
                                <td><span class="badge bg-success">低</span></td>
                                <td>2024-02-05</td>
                                <td><span class="badge bg-warning">待处理</span></td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary" onclick="viewMessage(1)">查看</button>
                                    <button class="btn btn-sm btn-outline-success" onclick="completeMessage(1)">完成</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 最近活动 -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">最近活动</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>系统活动</h6>
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon info">
                                    <i class="bi bi-person-plus"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">新增客户</div>
                                    <div class="activity-description">张三 已添加到客户档案</div>
                                    <div class="activity-time">2分钟前</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon success">
                                    <i class="bi bi-chat-dots"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">沟通记录</div>
                                    <div class="activity-description">与李四农业科技有限公司完成电话沟通</div>
                                    <div class="activity-time">15分钟前</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon warning">
                                    <i class="bi bi-bell"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">任务提醒</div>
                                    <div class="activity-description">客户跟进任务即将到期</div>
                                    <div class="activity-time">1小时前</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6>客户活动</h6>
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon primary">
                                    <i class="bi bi-eye"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">页面访问</div>
                                    <div class="activity-description">王五种子研究所访问了产品页面</div>
                                    <div class="activity-time">30分钟前</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon success">
                                    <i class="bi bi-download"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">文件下载</div>
                                    <div class="activity-description">李四农业科技有限公司下载了产品手册</div>
                                    <div class="activity-time">1小时前</div>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon info">
                                    <i class="bi bi-telephone"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">电话咨询</div>
                                    <div class="activity-description">张三咨询了种子价格信息</div>
                                    <div class="activity-time">2小时前</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/lib/bootstrap/bootstrap.bundle.min.js"></script>
    <!-- 消息详情模态框 -->
    <div class="modal fade" id="messageDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">消息详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="messageDetailContent">
                    <!-- 消息详情内容将通过JavaScript动态加载 -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('消息中心页面已加载');
        });
        
        // 查看消息详情
        function viewMessage(id) {
            const messages = [
                {
                    id: 1,
                    type: '客户跟进',
                    content: '跟进张三的种子采购需求',
                    priority: '高',
                    deadline: '2024-01-30',
                    status: '待处理',
                    description: '张三对玉米种子很感兴趣，需要详细了解品种特性和种植技术。已安排技术顾问进行详细沟通。',
                    assignee: '李四',
                    createTime: '2024-01-25 09:00:00',
                    updateTime: '2024-01-25 14:30:00'
                },
                {
                    id: 2,
                    type: '合同审核',
                    content: '审核与王五农业公司的合同',
                    priority: '中',
                    deadline: '2024-01-28',
                    status: '已完成',
                    description: '合同条款已审核完毕，价格合理，付款方式符合公司规定。建议签署。',
                    assignee: '王六',
                    createTime: '2024-01-20 10:00:00',
                    updateTime: '2024-01-27 16:00:00'
                },
                {
                    id: 3,
                    type: '技术培训',
                    content: '为客户提供种子种植技术培训',
                    priority: '低',
                    deadline: '2024-02-05',
                    status: '待处理',
                    description: '需要为10名客户提供玉米种植技术培训，包括播种、施肥、病虫害防治等内容。',
                    assignee: '赵七',
                    createTime: '2024-01-30 11:00:00',
                    updateTime: '2024-01-30 11:00:00'
                }
            ];
            
            const message = messages.find(m => m.id === id);
            if (message) {
                const content = 
                    '<div class="row">' +
                        '<div class="col-md-6">' +
                            '<h6>基本信息</h6>' +
                            '<p><strong>任务类型：</strong>' + message.type + '</p>' +
                            '<p><strong>任务内容：</strong>' + message.content + '</p>' +
                            '<p><strong>优先级：</strong><span class="badge bg-' + (message.priority === '高' ? 'danger' : message.priority === '中' ? 'warning' : 'success') + '">' + message.priority + '</span></p>' +
                            '<p><strong>截止时间：</strong>' + message.deadline + '</p>' +
                        '</div>' +
                        '<div class="col-md-6">' +
                            '<h6>状态信息</h6>' +
                            '<p><strong>状态：</strong><span class="badge bg-' + (message.status === '已完成' ? 'success' : 'warning') + '">' + message.status + '</span></p>' +
                            '<p><strong>负责人：</strong>' + message.assignee + '</p>' +
                            '<p><strong>创建时间：</strong>' + message.createTime + '</p>' +
                            '<p><strong>更新时间：</strong>' + message.updateTime + '</p>' +
                        '</div>' +
                    '</div>' +
                    '<div class="row mt-3">' +
                        '<div class="col-12">' +
                            '<h6>详细描述</h6>' +
                            '<p>' + message.description + '</p>' +
                        '</div>' +
                    '</div>';
                document.getElementById('messageDetailContent').innerHTML = content;
                new bootstrap.Modal(document.getElementById('messageDetailModal')).show();
            }
        }
        
        // 完成消息
        function completeMessage(id) {
            if (confirm('确定要完成这个任务吗？')) {
                alert('任务已完成！');
                // 这里可以添加实际的完成逻辑
            }
        }
    </script>
</body>
</html>